# R2DBC

### R2DBC 를 어린아이에게 설명하듯이 설명

```
R2DBC는 스프링 프레임워크와 함께 사용하는 특별한 방법이야. 이건 컴퓨터에서 데이터를 저장하고 꺼내는 데 도움이 돼. 예를 들어, 우리가 놀이방에서 장난감을 찾는 것처럼 데이터베이스에서 정보를 찾을 수 있게 도와줘.
R2DBC는 다른 방식으로 데이터베이스와 이야기해. 그래서 컴퓨터가 다른 작업을 기다리지 않고 동시에 여러 가지 일을 할 수 있어. 예를 들어, 친구들과 놀기를 기다리지 않고 공부도 할 수 있잖아? 그렇게 하면 컴퓨터도 한 번에 여러 작업을 할 수 있어 빨리 일을 처리할 수 있어요!
또한 R2DBC는 매우 빠르게 데이터에 접근할 수 있어. 그래서 우리가 빨리 정보를 찾고 수정할 수 있어. 데이터베이스에서 정보를 찾는 것이나 저장하는 것도 훨씬 빨라질 수 있어!
하지만 R2DBC는 아직 많이 사용하는 사람들보다는 조금 새로운 기술이야. 그래서 지원하는 데이터베이스가 조금 제한될 수 있어. 이는 우리가 사용하는 데이터베이스에 따라 다를 수 있어요.
```

### 장점(Compare To JDBC)

1. **비동기적인 처리**: R2DBC는 비동기적인 방식으로 데이터베이스와 상호 작용하므로, 애플리케이션이 여러 작업을 병렬로 처리할 수 있습니다. 이는 애플리케이션의 확장성과 성능을 향상시킬 수 있습니다.
2. **반응형 프로그래밍**: R2DBC는 Reactive Streams를 지원하므로, 데이터베이스 쿼리 결과를 스트림으로 처리할 수 있습니다. 이를 통해 데이터베이스 변화에 대한 실시간 알림을 구현하거나, 스트리밍 데이터를 처리하는 등의 반응형 프로그래밍 패턴을 쉽게 구현할 수 있습니다.
3. **리소스 효율성**: R2DBC는 논블로킹 액세스를 통해 I/O 리소스를 효율적으로 활용할 수 있습니다. 이는 동시에 많은 요청을 처리해야 하는 고성능 애플리케이션에 적합합니다.
4. **클라우드 네이티브**: R2DBC는 클라우드 네이티브 환경에 적합하도록 설계되었습니다. 비동기적인 데이터 액세스는 클라우드 환경의 확장성과 탄력성을 향상시키는 데 도움을 줄 수 있습니다.

### 단점(Compare To JDBC)

1. **생태계의 제한**: R2DBC는 상대적으로 새로운 기술이기 때문에 JDBC에 비해 더 적은 생태계와 지원을 가지고 있을 수 있습니다. JDBC는 오랜 기간 동안 사용되어 왔으며 다양한 데이터베이스 및 도구에서 널리 지원되고 있습니다. 반면에 R2DBC는 아직까지는 제한된 데이터베이스와 툴 지원을 가지고 있을 수 있습니다.
2. **학습 곡선**: R2DBC는 비동기 및 반응형 프로그래밍의 개념과 패턴을 이해하고 적용해야 합니다. 이는 기존에 JDBC를 사용하던 개발자들에게는 새로운 학습 곡선을 요구할 수 있습니다. 반면에 JDBC는 더 전통적이고 친숙한 동기적인 방식으로 동작하기 때문에, 접근하기가 더 쉬울 수 있습니다.
3. **제한된 데이터베이스 지원**: R2DBC는 아직까지 JDBC와 비교하여 제한된 데이터베이스 지원을 가질 수 있습니다. JDBC는 대부분의 주요 관계형 데이터베이스에 대한 넓은 지원을 제공하지만, R2DBC는 일부 데이터베이스에만 제한된 지원을 가지고 있을 수 있습니다. 따라서 특정 데이터베이스를 사용하는 경우 R2DBC를 지원하지 않을 수 있습니다.
4. **호환성 문제**: R2DBC는 기존의 JDBC 기반 코드와의 호환성 문제가 있을 수 있습니다. JDBC를 사용하는 애플리케이션을 R2DBC로 전환하려면 기존의 JDBC 코드를 변경해야 할 수 있습니다. 이는 일부 애플리케이션에서는 번거로울 수 있습니다.


### 커넥션 풀 최적화 방법

1. 커넥션 풀 크기 조정: 커넥션 풀의 크기를 적절하게 조정하여 동시에 처리할 수 있는 연결 수를 늘릴 수 있습니다. 너무 작은 풀 크기는 동시에 처리할 수 있는 연결 수를 제한하고, 너무 큰 풀 크기는 리소스 낭비를 초래할 수 있습니다. 애플리케이션의 요구 사항과 부하에 따라 커넥션 풀 크기를 조정하는 것이 중요합니다.
2. 커넥션 재사용: 커넥션을 재사용하여 새로운 연결을 맺지 않고 기존 연결을 재활용하는 것은 리소스 사용을 최적화하는 좋은 방법입니다. R2DBC는 커넥션 풀을 통해 커넥션을 관리하며, 애플리케이션이 요청을 처리한 후에는 커넥션을 반환하는 것이 중요합니다.
3. 커넥션 타임아웃 설정: 커넥션 풀에서 사용 가능한 커넥션의 대기 시간을 제한하는 것도 유용할 수 있습니다. 커넥션을 오랫동안 유지하는 것보다 일정 시간이 지나면 커넥션을 닫고 반환하는 것이 리소스를 효율적으로 관리하는 데 도움이 됩니다.
4. 비동기 처리 및 백 프레셔 설정: R2DBC는 비동기 방식으로 동작하므로, 비동기적인 데이터 액세스 패턴을 활용하여 커넥션 풀 부족 문제를 완화할 수 있습니다. 또한 백 프레셔(backpressure) 메커니즘을 사용하여 애플리케이션의 부하를 관리하고, 요청과 응답 사이의 밸런스를 조정할 수 있습니다.
5. 클라우드 네이티브 기능 활용: 클라우드 환경에서 R2DBC를 사용하는 경우, 클라우드 제공 업체가 제공하는 관리형 데이터베이스 서비스를 활용할 수 있습니다. 이러한 서비스는 커넥션 풀 관리를 자동으로 처리하고, 확장성과 가용성을 제공하는데 도움이 됩니다.

### mysql 에서 r2dbc 사용하기

1. R2DBC MySQL: R2DBC MySQL은 R2DBC와 MySQL을 연동하기 위한 공식적인 드라이버입니다. MySQL 데이터베이스와의 비동기적인 통신을 위한 핵심 기능을 제공합니다. Maven 또는 Gradle과 같은 의존성 관리 도구를 사용하여 프로젝트에 추가할 수 있습니다.
2. MariaDB R2DBC: MariaDB R2DBC는 MariaDB 데이터베이스와 R2DBC를 사용하기 위한 라이브러리입니다. MariaDB는 MySQL과 호환되는 오픈 소스 관계형 데이터베이스 시스템입니다. R2DBC를 지원하는 MariaDB R2DBC를 사용하면 MariaDB와의 비동기 액세스를 쉽게 구현할 수 있습니다.

