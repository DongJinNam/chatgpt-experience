# 데드락

실제 사례를 통해 MySQL에서 동시에 동일한 리소스를 요청할 때 데드락이 발생하는 문제를 어떻게 해결했는지, 그리고 데드락을 해결하는 것이 중요한 이유를 한국어로 설명하겠습니다.

예시 사례: 은행 거래 시스템에서 두 계좌 간의 자금 이체를 처리하는 어플리케이션을 생각해봅시다.

**문제 상황:**
- 은행 시스템에서 두 개의 계좌 A와 B가 있습니다.
- 두 명의 은행 직원이 동시에 A 계좌에서 B 계좌로 이체하는 거래와 B 계좌에서 A 계좌로 이체하는 거래를 처리하려고 합니다.
- 두 직원이 거의 동시에 서로 다른 순서로 계좌를 잠그려고 할 때 데드락이 발생합니다.

**해결 방법:**
1. **트랜잭션 재시도**: 데드락이 감지되면 트랜잭션을 자동으로 재시도하는 로직을 구현합니다. 이를 통해 시스템이 데드락 상태를 회복하고 정상적으로 거래를 처리할 수 있습니다.

2. **잠금 순서 정의**: 데이터에 접근하는 순서를 일관되게 유지하여 데드락을 방지합니다. 예를 들어, 계좌 번호 순으로 잠금을 얻는 것이 좋습니다.

3. **타임아웃 설정**: 트랜잭션에 타임아웃을 설정하여, 잠금을 얻지 못할 경우 트랜잭션이 일정 시간 이내에 자동으로 롤백되도록 합니다.

4. **분석 및 모니터링**: 시스템 로그를 분석하여 데드락 발생 패턴을 파악하고, 이를 기반으로 최적화를 수행합니다.

**결과 및 이유:**
- 데드락 처리 로직을 적용하여 시스템의 안정성이 향상되었습니다.
- 재시도 메커니즘이나 타임아웃 설정으로 데드락이 발생해도 사용자에게는 거의 눈치채지 못할 정도로 빠르게 처리됩니다.
- 이로 인해 시스템 전반적인 성능과 사용자 경험이 개선되었습니다.

데드락을 해결하는 것은 데이터 무결성을 유지하고, 시스템의 성능과 안정성을 높이는데 중요한 요소입니다. 특히 금융 서비스와 같이 높은 신뢰성이 요구되는 분야에서는 데드락 관리가 필수적입니다.
